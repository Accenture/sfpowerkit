name: Review

pr:
  branches:
    include:
      - main
      - hotfix/*
  paths:
    include:
      - "*"
    exclude:
      - "docs/*"

stages:
  - stage: Review
    displayName: Review
    dependsOn: []

    jobs:
      - job: SmokeTest
        displayName: Smoke Test PR
        strategy:
          matrix:
            windows:
              image: "windows-latest"
            ubuntu:
              image: "ubuntu-latest"
            macos:
              image: "macOS-latest"
        pool:
          vmImage: $(image)

        steps:
          - task: UseNode@1
            displayName: "Use Node 12x"
            inputs:
              version: 12.x

          - task: CmdLine@2
            displayName: Run npm install
            inputs:
              script: "npm install"

          - template: templates/smoke-test-template.yml
            parameters:
              version: review
